# Тема 7. Работа с файлами (ввод, вывод)
Отчет по Теме #7 выполнил:
- Боровягин Данил Андреевич
- ПИЭ-21-2

| Задание | Лаб_раб | Сам_раб |
| ------ | ------ | ------ |
| Задание 1 | + | + |
| Задание 2 | + | + |
| Задание 3 | + | + |
| Задание 4 | + | + |
| Задание 5 | + | + |

Работу проверили:
- к.э.н., доцент Панов М.А.

## Лабораторная работа №1

### Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/1.jpg)

## Выводы

создали текстовый файл, не выходя из программы. Удобно

## Лабораторная работа №2

### Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().

```python
with open("expenses.txt", "r") as file:
    print(file.readline())
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/2.jpg)

## Выводы

открыли файл и вывели первую строку файла. Решил раз есть конструкция `with` то можно не использовать `open()/close()`

## Лабораторная работа №3

### Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().

```python
file = open("expenses.txt", "r")
print(file.readlines())
file.close()

```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/3.jpg)

## Выводы

вывели все строки файла в консоль с помощью `readlines`

## Лабораторная работа №4

### Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().

```python
with open("expenses.txt", "r") as file:
    print(file.readlines())

```
### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/4.jpg)
 
## Выводы

тоже самое что в предыдущем примере но применили конструкцию `with open` 

## Лабораторная работа №5

### Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().

```python
with open("expenses.txt", "r") as file:
    for line in file:
        print(line)
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/5.jpg)

## Выводы

При помощи цикла `for` выводим каждую строку отделать так как каждая итерация заканчивается в конце строки.

## Лабораторная работа №6

### Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом. Обязательно проверьте сам файл, чтобы изменения в нем тоже отображались.

```python
with open("expenses.txt", "a") as f:
    f.write("\nсоль морская 80 рублей")

with open("expenses.txt", "r") as f:
    res = f.read()
    print(res)

```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/6.jpg)

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/6.1.jpg)

## Выводы

в данном коде мы добавляем новую строку и выводим всю информацию из файла в консоль. добавляем с помощью `write`

## Лабораторная работа №7

### Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка. Также не забудьте проверить что измененная вами информация сохранилась в файле.

```python
lin = ["one", "two", "three"]
with open("w.txt", "w") as f:
    for line in lin:
        f.write("\nprank " + line)
    print("готово!")
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/7.1.jpg)

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/7.2.jpg)

## Выводы

В данном коде мы при помощи цикла `for` в каждую строку добавляем prank + одно слово взятое из переменной `lin`

## Лабораторная работа №8

### Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print docs(directory).

```python
import os


def print_doc(directory):
    all = os.walk(directory)
    for catalog in all:
        print(f"папка {catalog[0]} содержит:")
    print(f'директория: {catalog[1]}')
    print(f'Файлы: {catalog[2]}')
    print("-" * 40)

print_doc("I:\The.Last.of.Us.Part.I.DDE.RePack.by.Chovka")
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/8.jpg)

## Выводы

В данном коде мы узнали как можно работать с файловыми системами, например вывести информацию о том какие файлы каталоги и подкаталоги находятся в определённом пути. достигаем мы это с помощью модуля `os.walk` который запускает рекурсивный обход всех подкаталогов в указаной директории и возвращает тройки (путь, подкаталоги, файлы), затем идёт цикл `for` с помощью которого мы проходим через каждую тройку и затем ссылаясь на индекс элемента мы вызываем его из переменной `catalog` которую объявили в цикле `for`. В вашем варианте есть конструкция которая изспользует денератор списка, а затем объединяет его в одну лини разделяя запятыми при помощи `join`, но как выясняется можно и без этого резутат почти тот же только появляются квадратные ковычки. 

## Лабораторная работа №9

### Требуется реализовать функцию, которая выводит слово, имеющее максимальную длину (или список слов, если таковых несколько). Проверьте работоспособность программы на своем наборе данных

```python
from collections import *


def long(file):
    with open(file, "r", encoding="utf-8") as f:
        content = f.read().split()
        count = Counter(content)
        longer_max = len(max(count, key=len))
        longer = [word for word in count if len(word) == longer_max]
        return longer


print(long("need.txt"))
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/9.jpg)

## Выводы

Немного изменил код под своё виденье. В данном коде мы создаём функцию которая возвращает слова с максимальной длиннной. мы открываем файл и используем `encording` для того что бы из файла коректно считывать данные и видеть их на консоли, затем разбиваем файл на отдельные слова через пробел при помощи `split` дальше про помощи `Counter` мы создаём список слов и кол-во их повторений в переменной `count` затем при помощи `max` мы находим в этом списке самое длинное слово так как для сравнения указали `key=len` затем создаём список всех слов `word for word in count` делаем проверку где берём длинну слова из списка `word` и сравниваем с нашим максимально длинным ловом в итоге возвращаем `longer` 

## Лабораторная работа №10

### 

```python
import csv
import datetime
import time

try:
    with open("rows_300.csv", "x"):
        pass
except FileExistsError:
    with open("rows_300.csv", "w", encoding="utf-8", newline="") as f:
        wri = csv.writer(f)
        wri.writerow(["№","секунда","микросекунда"])
        for line in range(0,300):
            wri.writerow([line, datetime.datetime.now().second, datetime.datetime.now().microsecond])
            time.sleep(0.01)
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/lab_7/10.jpg)

## Выводы

Я заметил что раз нам мужно создать файл то у нас есть специальнаяопция которую можно настроить в самом коде, но есть нюанс при повторном запуске будет выдавать ошибку так как файл уже существует, стоит подумать о том как избежать ошибки возможно поможет конструкция `try except` вслучае ошибки она переведёт нас ниже. Да действительно данная конструкция помогла. Также я использовал заглушку `pass` дабы избежать ошибки синтаксиса, `writerow` позваляет нам создать столбцы с названиями которые мы укажем, ниже с его же помощью мы присвоим слобцам значения и при помощи `for` создадим 300 строк.

## Самостоятельная работа №1

### Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.

```python
from collections import *

with open("lol.txt", "r") as files:
    content = files.read()
    worlds = len(content.split())
    sp = content.split()
    sp = [word for word in sp if len(word) >= 3]
    count = Counter(sp)
    most = count.most_common(1)[0][0]
    most_1 = count.most_common(1)[0][1]

print("кол-во слов:", worlds)
print("самое частое слово", most, f"встречается в тексте {most_1} раз")
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/1.1.jpg)

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/1.2.jpg)

## листинг

Мы импортируем класс `Counter` из модуля `collections`.

С помощью конструкции `with open("lol.txt", "r") as files:` мы открываем файл `"lol.txt"` для чтения. Контекстный менеджер `with` гарантирует корректное закрытие файла после использования.

Мы читаем содержимое файла и сохраняем его в переменную content с помощью метода `read()`.

Мы определяем переменную `words`, которая содержит количество слов в тексте. Для этого мы используем метод `split()` для разделения строки на слова и затем вычисляем длину списка слов.

Мы создаем список `word_list`, который содержит только слова длиной не менее 3 символов. Мы используем генератор списка `[word for word in word_list if len(word) >= 3]` для фильтрации слов по заданному условию.

Мы создаем объект `count` класса `Counter` и передаем в него список `word_list`. `Counter` подсчитывает количество вхождений каждого элемента в списке.

Мы используем метод `most_common(1) для получения наиболее часто встречающегося слова и его количества. Метод `most_common()` возвращает список пар (элемент, количество) в порядке убывания количества, а `[0][0] и [0][1]` позволяют получить первую пару и извлечь из нее само слово и количество.

Мы выводим на экран количество слов в тексте и информацию о самом часто встречающемся слове и его количестве.

## Вывод
 
В данной программе мы считаем количество слов при помощи `len` и `split` для разделения текста на слова, затем разбиваем весь разбиваем на отдельные слова делаем цикл который отсеит слова длинной меньше 3 символов, затем при помощи `Counter` и `most_common` находим самое частое слово и выводим само слово плюс количество раз которое оно повторяется

## Самостоятельная работа №2

###  У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет: скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.

```python
with open("expenses.txt", "a") as file:
    file.write(input("Введите данные о расходах:"))
    file.write("\n")
with open("expenses.txt", "r") as file:
    content = file.read()
print(content)
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/2.1.jpg)

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/2.2.jpg)

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/2.3.jpg)


## листинг

Мы открываем файл `"expenses.txt"` в режиме добавления `("a")` с помощью конструкции `with open("expenses.txt", "a") as file:`. Контекстный менеджер `with` гарантирует корректное закрытие файла после использования.

Мы используем функцию `input()` для приглашения пользователя ввести данные о расходах. Введенные данные записываются в файл с помощью метода `write()`. Мы также добавляем символ новой строки `("\n")` после записи данных.

Затем мы снова открываем файл `"expenses.txt"`, но в этот раз в режиме чтения `("r")`, с помощью конструкции `with open("expenses.txt", "r") as file:`. Мы читаем содержимое файла с помощью метода `read()` и сохраняем его в переменную `content.

Наконец, мы выводим содержимое файла на экран с помощью функции `print()`.

## Самостоятельная работа №3

### Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк.
Текст в файле:
Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Ожидаемый результат:
Input file contains:
108 letters
20 words
4 lines

```python
import string

with open("latin.txt","r") as file:
    content = file.read()
    worlds = len(content.split())

    content = content.lower()
    content = content.translate(str.maketrans("","", string.punctuation))
    lis = list(content)
    while " " in lis:
        lis.remove(" ")
    while "\n" in lis:
        lis.remove("\n")
    bukvi = len(lis)

    line = content.splitlines()
    kol = len(line)

print(bukvi, "буквы")
print(worlds, "слова")
print(kol, "строки")
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/3.jpg)

## Вывод

В данной программе импортируем `string` это позволяет работать со знаками пунктуации. считаем кол-во слов так же как в первой программе, затем убирираем знаки припинания, создаём список без знаков припинания, потом даляем все пробелы и переносы строк с пмощью цикла `while` и метода `remove`. В конце мы разбиваем наш текст на отдельные строки при помощи метода `splitlines` считаем их кол-во с помощью `len`

## Самостоятельная работа №4

### Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и exAm должны быть заменены на ****
•Запрещенные слова:
hello email python the exam wor is
•Предложение для проверки:
Hello, world! Python IS the programming language of thE future. My EMAIL is…
PYTHON is awesome!!!!
Ожидаемый результат:
***** ***ld! ****** ** *** programming language of *** future. My
***** **
****** ** awesome!!!!

```python
user = input("введите предложение")
use = user.lower()


with open("ignor.txt", "r") as f:
    content = f.read()
    content_list = content.split()

for word in content_list:
    rep = "*" * len(word)
    use = use.replace(word, rep, -1)

print(use)
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/4.jpg)


## Вывод

В данной программе мы сначала принимаем данные от пользователя, затем переводим их все к нижнему регистру что бы учесть все исключения, открываем файл для чтения, считываем весь файл целиком и разбиваем на отдельные слова с помощью `split` при помощи цикла `for` мы проходимся по всем словам из нашего списка запретов и по очередно считаем длинну и заменяем символы звёздачками, потом при помощи `replace` мы заменяем все совпадения с `word` на `rep` -1 означает длинну что мы заменяем до конца предложения в конеце выводим результат

## Самостоятельная работа №5

### Некоторая компания попросила написать код который позволит вносить сотрудников в список хронящийся в файле так же при необходимости осуществлять поиск по id сотрудников в этом списке, и иметь возможность просмотреть полный список.

```python
user = input("1:информация о сотруднике\n2:добавление нового сотрудника\n3:просмотр всего файла\nвыберите действие ")

if user == "2":
    while True:
        users = input("введите 1 для продолжения добавления сотрудников или введите 2 для завершения ")

        if users == "2":
            break

        id = input(str("Введите id сотрудника: "))
        fio = input(str("Введите ФИО сотрудника: "))
        age = input(str("Введите возраст сотрудника: "))
        status = input(str("Введите статус сотрудника: "))
        company = input(str("Введите компанию сотрудника: "))
        with open("id.txt", "a") as f:
            content = f.write("\n" + "id " + id + ": " + "ФИО:" + fio + ", " + "возвраст:" + age + "лет, " + "статус:" + status + ", " + "компания:" + company + "." + "\n")

elif user == "1":
    id_user = input("введите id сотрудника: ")
    with open("id.txt", "r") as f:
        lin = f.readlines()
        for line in lin:
            if line.startswith(f"id {id_user}"):
                print(line)
                break
        else:
            print("Введенного id нет в базе данных.")

elif user == "3":
    with open("id.txt", "r") as f:
        file = f.read()
        print(file)

else:
    print("не верное значение")
```

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/5.1.jpg)

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/5.2.jpg)

### Результат.

![Меню](https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/5.3.jpg)

### Результат.

![скрин]
(https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/6.1.jpg)

### Результат.

![скрин]
(https://github.com/DanilBorovyagin/software_engine/blob/Тема_7/tema_7/6.2.jpg)


## Вывод

суть программы очень простая, для добавления информации мы получаем информацию от пользователя через `input` при помощи `if` мы даём выбирать действие. При добавлении данных мы запускаем цикл `while` который является бесконечным до тех пор пока пользователь не напишет цифру 2,открываем файл в режими добавления, получаем данные и с помощью конструкции `wirh` гарнтируем коректное закрытие файла. Потом для нахождения по id мы так же открываем файл, но уже в режиме чтения, выбираем метод для считывания всех строк `readlines` затем с помощью цикла `for` проверяем каждую строку и если в страке мы обнаружим сочетание `id id_user` тогда выводим эту строку для этого используем метод встроеный в python `starswith` и прерываем цикл с помощью `break` если такой строки нет выводим надпись на экран. Последнее действие которое у нас есть просмотреть всю информацию из файла, просто считываем информацию из файла и выводим её в консоль.

## общий Вывод по теме

В данной теме мы рассмотрели небольшую часть того как можно взаимодействовать с файлами посредставам кода написанного на языке `python` изучили как открыть файл для чтения/записи, создать новый файл, добавить что то в уже заполнейный файл, узнали как считывать одну строку либо много строк или весь файл целиком, изучили конструкцию `with open` которая гарантирует коректное закрытие файла, узнали как можно при помощи цикла `for` вывести отдельно каждую строку. Познакомились с типом файлов `csv` создали в нём таблицу которая отображала милисекунды прошедшие на нашем пк. научились работать с информацие из файлов. посчитали буквы слова и строки в файлах. и придумали свою задачу, я смог реализовать то что не смог сделать в прошлой работе где мне как раз не хватало файлов для записи информации ихранения её там.

